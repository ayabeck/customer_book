<% provide(:title, controller_name) %>

<div class="page-header">
  <h2>イベント<small>インポート</small></h2>
</div>

<p class="link-action">
  <%= link_to '戻る', events_path %>
</p>

<%= simple_form_for(@data_import, url: import_events_path) do |f| %>
  <% if @data_import.errors.any? %>
    <div class="panel panel-danger">
      <div class="panel-heading"><%= I18n.t 'simple_form.error_notification.default_message' %></div>
      <div class="panel-body">
        <ul class="list-unstyled">
          <% @data_import.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>
  <div class="form-inputs">
    <%= f.input :file, as: :file %>
  </div>
  <div class="form-actions">
    <%= bootstrap_form_button(f) %>
  </div>
<% end %>

<br>

<p>A CSV or Excel file can be used to import records. The first row should be the column name. The following columns are allowed.</p>
<ul>
  <% Event.columns.each do |column| %>
    <% if column.name.in? ["id", *Event.allowed_attributes] %>
      <li>
        <strong><%= column.name %></strong> -
        <%= column.type.to_s.titleize %>型
      </li>
    <% end %>
  <% end %>
</ul>
<p>If an <strong>id</strong> is supplied it will update the matching record instead of creating a new one.</p>
